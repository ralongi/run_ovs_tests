### README for using files in git@github.com:ralongi/run_ovs_tests.git ###

The files in this repo are to be used for running OVS tests when using 
fdp-ci-test may not be feasible (i.e. when running testsoutside of an OVS FDP
release such as RHEL CTC/RC test cycles, NIC or system certification testing,
"one-off" testing, etc.).

- Main script file used to launch tests
- ./run_ovs_tests.sh -h will provide usage information

- Export list of tests to be run via "export tests=<list of tests to be run>
- Example: export tests="test_exec_forward_bpdu test_exec_ovs_qos test_exec_of_rules"

- Export RHEL compose to be used via "export COMPOSE=<RHEL compose>
- Example: export COMPOSE=RHEL-9.4.0-updates-20251021.0

- Optional:
- Tests run in Image Mode by default.  To run in Package Mode: 
export image_mode=no

- Export OVS RPMs to be used if not using those specified in fdp_package_list.sh
(see below)
- Example: 
export RPM_OVS="https://download-01.beak-001.prod.iad2.dc.redhat.com/brewroot
/vol/rhel-9/packages/openvswitch3.3/3.3.6/141.el9fdp/aarch64/
openvswitch3.3-3.3.6-141.el9fdp.aarch64.rpm"

Optional:
- Export any special info to be appended to the beaker white board
- Example: export special_info="[rhel-10.1] RC compose qualification (Tier1
 Testing) - OVS Kernel Topology, https://issues.redhat.com/browse/FDPQE-1590"
 
Launch jobs using run_ovs_tests.sh <OVS release> <RHEL version> <OVS version>
- Example: ./run_ovs_tests.sh 25.11 9.4 3.50

Current list of tests:

test_exec_forward_bpdu.sh          
test_exec_ovs_qos.sh            
test_exec_topo.sh (see additional topo info below)
test_exec_mcast_snoop.sh           
test_exec_ovs_upgrade.sh        
test_exec_vm100.sh
test_exec_of_rules.sh              
test_exec_power_cycle_crash.sh
test_exec_ovs_memory_leak_soak.sh
test_exec_sanity_check.sh

### Additional info for running topo tests:
	# Standard cards:	
	test_exec_topo_e810_ice
	test_exec_topo_i40e
	test_exec_topo_mlx5_core_arm
	test_exec_topo_mlx5_core_cx5
	test_exec_topo_mlx5_core_cx6_dx
	test_exec_topo_mlx5_core_cx6_lx
	test_exec_topo_mlx5_core_bf2
	test_exec_topo_mlx5_core_cx7
	test_exec_topo_ice_sts

	# Sanity only cards (bare metal only):
	test_exec_topo_enic
	test_exec_topo_qede
	test_exec_topo_bnxt_en
	test_exec_topo_ixgbe
	
	# Special "one-off" cards (certification testing, etc.):	
	test_exec_topo_e830_ice
	test_exec_topo_e825_ice
	test_exec_topo_e810_ice_bp
	test_exec_topo_e823_ice_bp
	test_exec_topo_e823_ice_sfp
	test_exec_topo_i40e_t4l
	test_exec_topo_empire
	test_exec_topo_6820c
	test_exec_topo_bmc57504

Other files:

exec_my_ovs_tests_template.sh, exec_my_ovs_tests.sh, get_errata_packages.sh,
get_zstream_compose_function.sh
- These files are invoked when run_ovs_tests.sh is run

fdp_package_list.sh
- Contains list of OVS packages.
- Is used by run_ovs_tests.sh if no OVS package files have already been
specified via the export command (i.e. 
export RPM_OVS="https://download-01.beak-001.prod.iad2.dc.redhat.com/brewroot
/vol/rhel-9/packages/openvswitch3.3/3.3.6/141.el9fdp/aarch64/
openvswitch3.3-3.3.6-141.el9fdp.aarch64.rpm"

package_list_update.sh
- Script used to update the fdp_package_list.sh file.
- Usage: ./package_list_update.sh 25.11
- The script will query the errata tool to determine the packages to be used
and will then update fdp_package_list.sh with this information.

NOTE: Additional information for running test_exec_ovs_memory_leak_soak.sh can
be found here:
https://docs.google.com/spreadsheets/d/
18RtdfX-nBXKwyGR2lsIIbO-DZLxCt721hdI9LU9Z9FY/edit?usp=sharing
